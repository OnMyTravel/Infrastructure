server {
	listen 80;
  server_name www.{{ site_domain }} {{ site_api_subdomain }};

	root {{ nginx_application_path }};
	index index.html index.htm;

  error_log {{ nginx_error_file }};

	location / {
		try_files $uri $uri/ =404;
	}
}

# HTTPS server
#
server {
	listen 443;
  server_name {{ site_domain }};

	root {{ nginx_application_path }};
	index index.html index.htm;

  error_log {{ nginx_error_file }};

  {% if generate_site_config_with_ssl %}
    ssl off;
    ssl_certificate      {{ ssl_certificate_path }};
    ssl_certificate_key  {{ ssl_keyfile_path }};

    ssl_session_timeout 5m;

    ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers "HIGH:!aNULL:!MD5 or HIGH:!aNULL:!MD5:!3DES";
    ssl_prefer_server_ciphers on;
  {% endif %}

	location / {
		try_files $uri $uri/ =404;
	}
}
